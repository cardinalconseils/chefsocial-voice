(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{7894:function(e,s,t){Promise.resolve().then(t.bind(t,7634))},7634:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return U}});var a=t(7437),n=t(2265),l=t(9376),r=t(9116),i=t(7648),c=t(9064),d=t(5466),o=t(5805),m=t(6221),h=t(8736),x=t(8906),u=t(8728),g=t(2489),f=t(8293),j=t(7692);let v=[{name:"Dashboard",href:"/dashboard",icon:d.Z},{name:"Users",href:"/users",icon:o.Z},{name:"Analytics",href:"/analytics",icon:m.Z},{name:"Usage Reports",href:"/usage",icon:h.Z},{name:"Audit Logs",href:"/audit",icon:x.Z},{name:"Settings",href:"/settings",icon:u.Z}];function p(){var e;let s=(0,l.usePathname)(),t=(0,l.useRouter)(),[d,o]=(0,n.useState)(!1),m=r.kv.getCurrentUser(),h=e=>s===e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"lg:hidden fixed top-4 left-4 z-50",children:(0,a.jsx)("button",{onClick:()=>o(!d),className:"p-2 rounded-lg bg-white shadow-md text-chef-dark hover:bg-gray-50",children:d?(0,a.jsx)(g.Z,{className:"h-6 w-6"}):(0,a.jsx)(f.Z,{className:"h-6 w-6"})})}),d&&(0,a.jsx)("div",{className:"lg:hidden fixed inset-0 z-40 bg-black bg-opacity-50",onClick:()=>o(!1)}),(0,a.jsx)("div",{className:"\n        fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-xl transform transition-transform duration-300 ease-in-out\n        lg:translate-x-0 lg:static lg:inset-0\n        ".concat(d?"translate-x-0":"-translate-x-full lg:translate-x-0","\n      "),children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"flex items-center justify-center h-16 px-4 bg-chef-orange",children:(0,a.jsx)("h1",{className:"text-xl font-bold text-white",children:"ChefSocial Admin"})}),(0,a.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-2",children:v.map(e=>{let s=e.icon;return(0,a.jsxs)(i.default,{href:e.href,onClick:()=>o(!1),className:"\n                    flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors\n                    ".concat(h(e.href)?"bg-chef-orange text-white":"text-chef-gray hover:bg-gray-100 hover:text-chef-dark","\n                  "),children:[(0,a.jsx)(s,{className:"h-5 w-5 mr-3"}),e.name]},e.name)})}),(0,a.jsxs)("div",{className:"border-t border-gray-200 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"h-8 w-8 bg-chef-orange rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-medium text-white",children:(null==m?void 0:null===(e=m.name)||void 0===e?void 0:e.charAt(0))||"A"})})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-chef-dark",children:(null==m?void 0:m.name)||"Admin"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:(null==m?void 0:m.email)||"admin@chefsocial.io"})]})]}),(0,a.jsxs)("button",{onClick:()=>{r.kv.logout(),c.ZP.success("Logged out successfully"),t.push("/login")},className:"flex items-center w-full px-4 py-2 text-sm font-medium text-red-600 rounded-lg hover:bg-red-50 transition-colors",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4 mr-3"}),"Sign Out"]})]})]})})]})}function N(e){let{children:s}=e,t=(0,l.useRouter)();return((0,n.useEffect)(()=>{r.kv.isAuthenticated()||t.push("/login")},[t]),r.kv.isAuthenticated())?(0,a.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,a.jsx)(p,{}),(0,a.jsx)("div",{className:"flex-1 flex flex-col overflow-hidden lg:ml-0",children:(0,a.jsx)("main",{className:"flex-1 overflow-y-auto p-6 lg:p-8",children:s})}),(0,a.jsx)(c.x7,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#27AE60",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#E74C3C",secondary:"#fff"}}}})]}):(0,a.jsx)("div",{className:"min-h-screen bg-chef-light flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"loading-spin w-8 h-8 border-4 border-chef-orange border-t-transparent rounded-full mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-chef-gray",children:"Authenticating..."})]})})}var b=t(525),w=t(3085),y=t(4401),k=t(8226),Z=t(7806),S=t(3417),A=t(1867);function C(e){let{title:s,value:t,change:n,trend:l,icon:r,loading:i}=e;return(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6 card-hover",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-chef-orange bg-opacity-10 rounded-lg",children:r}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:s}),(0,a.jsx)("div",{className:"flex items-center mt-1",children:i?(0,a.jsx)("div",{className:"h-6 w-16 bg-gray-200 rounded animate-pulse"}):(0,a.jsx)("p",{className:"text-2xl font-bold text-chef-dark",children:t})})]})]}),n&&!i&&(0,a.jsxs)("div",{className:"flex items-center text-sm ".concat("up"===l?"text-green-600":"down"===l?"text-red-600":"text-gray-600"),children:["up"===l?(0,a.jsx)(b.Z,{className:"h-4 w-4 text-green-500"}):"down"===l?(0,a.jsx)(w.Z,{className:"h-4 w-4 text-red-500"}):(0,a.jsx)(y.Z,{className:"h-4 w-4 text-gray-500"}),(0,a.jsx)("span",{className:"ml-1",children:n})]})]})})}function U(){let e;let[s,t]=(0,n.useState)(null),[l,i]=(0,n.useState)(!0),[c,d]=(0,n.useState)("30d");(0,n.useEffect)(()=>{m()},[c]);let m=async()=>{try{i(!0);let e=await r.n9.getAnalytics(c);t(e.analytics)}catch(e){console.error("Failed to load analytics:",e)}finally{i(!1)}};return(0,a.jsx)(N,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-chef-dark",children:"Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Welcome back! Here's what's happening with ChefSocial."})]}),(0,a.jsx)("div",{className:"mt-4 lg:mt-0",children:(0,a.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"form-input w-auto",children:[(0,a.jsx)("option",{value:"7d",children:"Last 7 days"}),(0,a.jsx)("option",{value:"30d",children:"Last 30 days"}),(0,a.jsx)("option",{value:"90d",children:"Last 90 days"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)(C,{title:"Total Users",value:(null==s?void 0:s.totalUsers)||0,icon:(0,a.jsx)(o.Z,{className:"h-6 w-6 text-chef-orange"}),loading:l}),(0,a.jsx)(C,{title:"Active Subscriptions",value:(null==s?void 0:s.activeSubscriptions)||0,icon:(0,a.jsx)(k.Z,{className:"h-6 w-6 text-chef-orange"}),loading:l}),(0,a.jsx)(C,{title:"New Users",value:(null==s?void 0:s.newUsers)||0,change:"30d"===c?"+12%":void 0,trend:"up",icon:(0,a.jsx)(Z.Z,{className:"h-6 w-6 text-chef-orange"}),loading:l}),(0,a.jsx)(C,{title:"Content Generated",value:(null==s?void 0:s.contentGenerated)||0,change:"30d"===c?"+24%":void 0,trend:"up",icon:(0,a.jsx)(S.Z,{className:"h-6 w-6 text-chef-orange"}),loading:l})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-chef-dark",children:"Monthly Recurring Revenue"}),(0,a.jsx)(A.Z,{className:"h-6 w-6 text-green-500"})]}),l?(0,a.jsx)("div",{className:"h-8 w-24 bg-gray-200 rounded animate-pulse"}):(0,a.jsx)("p",{className:"text-3xl font-bold text-green-600",children:(e=(null==s?void 0:s.revenue.monthlyRecurringRevenue)||0,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e/100))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-chef-dark",children:"Active Subscribers"}),(0,a.jsx)(o.Z,{className:"h-6 w-6 text-chef-blue"})]}),l?(0,a.jsx)("div",{className:"h-8 w-16 bg-gray-200 rounded animate-pulse"}):(0,a.jsx)("p",{className:"text-3xl font-bold text-chef-blue",children:(null==s?void 0:s.revenue.activeSubscriptions)||0})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-chef-dark mb-4",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("a",{href:"/users",className:"p-4 border border-gray-200 rounded-lg hover:border-chef-orange hover:shadow-md transition-all",children:[(0,a.jsx)(o.Z,{className:"h-8 w-8 text-chef-orange mb-2"}),(0,a.jsx)("h4",{className:"font-medium text-chef-dark",children:"Manage Users"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"View and manage user accounts"})]}),(0,a.jsxs)("a",{href:"/analytics",className:"p-4 border border-gray-200 rounded-lg hover:border-chef-orange hover:shadow-md transition-all",children:[(0,a.jsx)(y.Z,{className:"h-8 w-8 text-chef-orange mb-2"}),(0,a.jsx)("h4",{className:"font-medium text-chef-dark",children:"View Analytics"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Detailed platform analytics"})]}),(0,a.jsxs)("a",{href:"/audit",className:"p-4 border border-gray-200 rounded-lg hover:border-chef-orange hover:shadow-md transition-all",children:[(0,a.jsx)(S.Z,{className:"h-8 w-8 text-chef-orange mb-2"}),(0,a.jsx)("h4",{className:"font-medium text-chef-dark",children:"Audit Logs"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Review admin activities"})]})]})]})]})})}},9116:function(e,s,t){"use strict";t.d(s,{kv:function(){return n},n9:function(){return l}});let a=t(3464).Z.create({baseURL:"https://api.chefsocial.io",timeout:3e4,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{{let s=localStorage.getItem("admin_token");s&&(e.headers.Authorization="Bearer ".concat(s))}return e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>{var s;return(null===(s=e.response)||void 0===s?void 0:s.status)===401&&(localStorage.removeItem("admin_token"),localStorage.removeItem("admin_user"),window.location.href="/login"),Promise.reject(e)});let n={login:async(e,s)=>(await a.post("/api/admin/auth/login",{email:e,password:s})).data,logout:()=>{localStorage.removeItem("admin_token"),localStorage.removeItem("admin_user")},getCurrentUser:()=>{let e=localStorage.getItem("admin_user");return e?JSON.parse(e):null},isAuthenticated:()=>!!localStorage.getItem("admin_token")},l={getAnalytics:async e=>(await a.get("/api/admin/analytics",{params:{period:e}})).data,getUsageReports:async(e,s)=>(await a.get("/api/admin/usage-reports",{params:{period:e,userId:s}})).data}}},function(e){e.O(0,[301,368,194,971,117,744],function(){return e(e.s=7894)}),_N_E=e.O()}]);