(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[496],{7913:function(e,s,t){Promise.resolve().then(t.bind(t,2e3))},2e3:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return l}});var a=t(7437),i=t(2265),n=t(8267);function l(){let[e,s]=(0,i.useState)([]),[t,l]=(0,i.useState)(null),[r,d]=(0,i.useState)(!0),[c,o]=(0,i.useState)(null),[m,x]=(0,i.useState)("all");(0,i.useEffect)(()=>{h(),u();let e=setInterval(()=>{h(),u()},3e4);return()=>clearInterval(e)},[]);let h=async()=>{try{let e=await fetch("/api/admin/sessions",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("admin_token"))}});if(e.ok){let t=await e.json();s(t.sessions||[])}}catch(e){console.error("Failed to load sessions:",e)}finally{d(!1)}},u=async()=>{try{let e=await fetch("/api/admin/sessions/stats",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("admin_token"))}});if(e.ok){let s=await e.json();l(s.stats)}}catch(e){console.error("Failed to load session stats:",e)}},g=async e=>{if(confirm("Are you sure you want to end this session?"))try{(await fetch("/api/admin/sessions/".concat(e,"/end"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("admin_token"))}})).ok&&(h(),(null==c?void 0:c.id)===e&&o(null))}catch(e){console.error("Failed to end session:",e)}},v=e=>{switch(e){case"active":return"text-green-600 bg-green-100";case"paused":return"text-yellow-600 bg-yellow-100";case"completed":default:return"text-gray-600 bg-gray-100";case"failed":return"text-red-600 bg-red-100"}},f=(e,s)=>{let t=new Date(e),a=Math.floor(((s?new Date(s):new Date).getTime()-t.getTime())/1e3/60);return a<60?"".concat(a,"m"):"".concat(Math.floor(a/60),"h ").concat(a%60,"m")},j=e.filter(e=>"all"===m||e.status===m);return r?(0,a.jsx)(n.Z,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"text-lg",children:"Loading sessions..."})})}):(0,a.jsx)(n.Z,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Session Monitoring"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Monitor and manage user sessions across the platform"})]}),(0,a.jsx)("div",{className:"flex gap-3",children:(0,a.jsx)("button",{onClick:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"\uD83D\uDD04 Refresh"})})]}),t&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:t.total_active}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Active Sessions"})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:t.total_today}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Sessions Today"})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[t.avg_duration,"m"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Avg Duration"})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:t.content_generated_today}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Content Today"})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-red-600",children:[t.voice_minutes_today,"m"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Voice Minutes"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 bg-white rounded-lg border",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Active Sessions"}),(0,a.jsxs)("select",{value:m,onChange:e=>x(e.target.value),className:"px-3 py-1 border rounded-md text-sm",children:[(0,a.jsx)("option",{value:"all",children:"All Sessions"}),(0,a.jsx)("option",{value:"active",children:"Active Only"}),(0,a.jsx)("option",{value:"paused",children:"Paused"}),(0,a.jsx)("option",{value:"completed",children:"Completed"}),(0,a.jsx)("option",{value:"failed",children:"Failed"})]})]})}),(0,a.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===j.length?(0,a.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCAD"}),(0,a.jsx)("div",{children:"No sessions found"})]}):j.map(e=>(0,a.jsx)("div",{className:"p-4 border-b hover:bg-gray-50 cursor-pointer ".concat((null==c?void 0:c.id)===e.id?"bg-blue-50 border-l-4 border-l-blue-500":""),onClick:()=>o(e),children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:"font-medium",children:e.user_name}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(v(e.status)),children:e.status})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[e.type," â€¢ ",f(e.started_at,e.ended_at)]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Started: ",new Date(e.started_at).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"text-right text-sm",children:[(0,a.jsxs)("div",{className:"text-gray-600",children:[e.content_generated," content"]}),(0,a.jsxs)("div",{className:"text-gray-500",children:[e.voice_minutes,"m voice"]})]})]})},e.id))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Session Details"})}),c?(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:c.user_name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["User ID: ",c.user_id]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-500",children:"Type"}),(0,a.jsx)("div",{className:"font-medium",children:c.type})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-500",children:"Status"}),(0,a.jsx)("div",{className:"inline-block px-2 py-1 rounded-full text-xs ".concat(v(c.status)),children:c.status})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-500",children:"Duration"}),(0,a.jsx)("div",{className:"font-medium",children:f(c.started_at,c.ended_at)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-500",children:"Content Generated"}),(0,a.jsx)("div",{className:"font-medium",children:c.content_generated})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-500",children:"Voice Minutes"}),(0,a.jsxs)("div",{className:"font-medium",children:[c.voice_minutes,"m"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-500",children:"Platform"}),(0,a.jsx)("div",{className:"font-medium",children:c.platform||"N/A"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-500 text-sm",children:"Started"}),(0,a.jsx)("div",{className:"font-medium",children:new Date(c.started_at).toLocaleString()})]}),c.ended_at&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-500 text-sm",children:"Ended"}),(0,a.jsx)("div",{className:"font-medium",children:new Date(c.ended_at).toLocaleString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-500 text-sm",children:"Last Activity"}),(0,a.jsx)("div",{className:"font-medium",children:new Date(c.last_activity).toLocaleString()})]}),"active"===c.status&&(0,a.jsx)("div",{className:"pt-4 border-t",children:(0,a.jsx)("button",{onClick:()=>g(c.id),className:"w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"End Session"})})]}):(0,a.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCCA"}),(0,a.jsx)("div",{children:"Select a session to view details"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Recent Activity"})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:j.slice(0,10).map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("span",{className:"font-medium",children:e.user_name})," ","active"===e.status?"is actively using":"completed"," ",(0,a.jsx)("span",{className:"text-gray-600",children:e.type})]}),(0,a.jsx)("div",{className:"text-gray-500",children:new Date(e.last_activity).toLocaleTimeString()})]},e.id))})})]})]})})}},8267:function(e,s,t){"use strict";t.d(s,{Z:function(){return y}});var a=t(7437),i=t(2265),n=t(9376),l=t(9116),r=t(7648),d=t(9064),c=t(5466),o=t(5805),m=t(4401),x=t(6221),h=t(8736),u=t(8906),g=t(8728),v=t(2489),f=t(8293),j=t(7692);let N=[{name:"Dashboard",href:"/dashboard",icon:c.Z},{name:"Users",href:"/users",icon:o.Z},{name:"Sessions",href:"/sessions",icon:m.Z},{name:"Analytics",href:"/analytics",icon:x.Z},{name:"Usage Reports",href:"/usage",icon:h.Z},{name:"Audit Logs",href:"/audit",icon:u.Z},{name:"Settings",href:"/settings",icon:g.Z}];function p(){var e;let s=(0,n.usePathname)(),t=(0,n.useRouter)(),[c,o]=(0,i.useState)(!1),m=l.kv.getCurrentUser(),x=e=>s===e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"lg:hidden fixed top-4 left-4 z-50",children:(0,a.jsx)("button",{onClick:()=>o(!c),className:"p-2 rounded-lg bg-white shadow-md text-chef-dark hover:bg-gray-50",children:c?(0,a.jsx)(v.Z,{className:"h-6 w-6"}):(0,a.jsx)(f.Z,{className:"h-6 w-6"})})}),c&&(0,a.jsx)("div",{className:"lg:hidden fixed inset-0 z-40 bg-black bg-opacity-50",onClick:()=>o(!1)}),(0,a.jsx)("div",{className:"\n        fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-xl transform transition-transform duration-300 ease-in-out\n        lg:translate-x-0 lg:static lg:inset-0\n        ".concat(c?"translate-x-0":"-translate-x-full lg:translate-x-0","\n      "),children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"flex items-center justify-center h-16 px-4 bg-chef-orange",children:(0,a.jsx)("h1",{className:"text-xl font-bold text-white",children:"ChefSocial Admin"})}),(0,a.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-2",children:N.map(e=>{let s=e.icon;return(0,a.jsxs)(r.default,{href:e.href,onClick:()=>o(!1),className:"\n                    flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors\n                    ".concat(x(e.href)?"bg-chef-orange text-white":"text-chef-gray hover:bg-gray-100 hover:text-chef-dark","\n                  "),children:[(0,a.jsx)(s,{className:"h-5 w-5 mr-3"}),e.name]},e.name)})}),(0,a.jsxs)("div",{className:"border-t border-gray-200 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"h-8 w-8 bg-chef-orange rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-medium text-white",children:(null==m?void 0:null===(e=m.name)||void 0===e?void 0:e.charAt(0))||"A"})})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-chef-dark",children:(null==m?void 0:m.name)||"Admin"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:(null==m?void 0:m.email)||"admin@chefsocial.io"})]})]}),(0,a.jsxs)("button",{onClick:()=>{l.kv.logout(),d.ZP.success("Logged out successfully"),t.push("/login")},className:"flex items-center w-full px-4 py-2 text-sm font-medium text-red-600 rounded-lg hover:bg-red-50 transition-colors",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4 mr-3"}),"Sign Out"]})]})]})})]})}function y(e){let{children:s}=e,t=(0,n.useRouter)();return((0,i.useEffect)(()=>{l.kv.isAuthenticated()||t.push("/login")},[t]),l.kv.isAuthenticated())?(0,a.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,a.jsx)(p,{}),(0,a.jsx)("div",{className:"flex-1 flex flex-col overflow-hidden lg:ml-0",children:(0,a.jsx)("main",{className:"flex-1 overflow-y-auto p-6 lg:p-8",children:s})}),(0,a.jsx)(d.x7,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#27AE60",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#E74C3C",secondary:"#fff"}}}})]}):(0,a.jsx)("div",{className:"min-h-screen bg-chef-light flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"loading-spin w-8 h-8 border-4 border-chef-orange border-t-transparent rounded-full mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-chef-gray",children:"Authenticating..."})]})})}},9116:function(e,s,t){"use strict";t.d(s,{kv:function(){return i},n9:function(){return n}});let a=t(3464).Z.create({baseURL:"https://api.chefsocial.io",timeout:3e4,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{{let s=localStorage.getItem("admin_token");s&&(e.headers.Authorization="Bearer ".concat(s))}return e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>{var s;return(null===(s=e.response)||void 0===s?void 0:s.status)===401&&(localStorage.removeItem("admin_token"),localStorage.removeItem("admin_user"),window.location.href="/login"),Promise.reject(e)});let i={login:async(e,s)=>(await a.post("/api/admin/auth/login",{email:e,password:s})).data,logout:()=>{localStorage.removeItem("admin_token"),localStorage.removeItem("admin_user")},getCurrentUser:()=>{let e=localStorage.getItem("admin_user");return e?JSON.parse(e):null},isAuthenticated:()=>!!localStorage.getItem("admin_token")},n={getAnalytics:async e=>(await a.get("/api/admin/analytics",{params:{period:e}})).data,getUsageReports:async(e,s)=>(await a.get("/api/admin/usage-reports",{params:{period:e,userId:s}})).data}}},function(e){e.O(0,[301,368,786,971,117,744],function(){return e(e.s=7913)}),_N_E=e.O()}]);